<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Aliif Arief - {{ .Site.BaseURL }}">
  <title>{{ if eq .IsHome true }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
  <meta name="description" content="{{ if ne .Description "" }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
  {{ template "_internal/opengraph.html" . }}
  {{ template "_internal/schema.html" . }}
  {{ template "_internal/twitter_cards.html" . }}
  <link rel="canonical" href="{{ .Permalink | absURL }}">
  <link rel="alternate" type="application/atom+xml" title="{{ .Site.Title }}" href="{{ .Site.BaseURL }}atom.xml" />
  <link rel="alternate" type="application/json" title="{{ .Site.Title }}" href="{{ .Site.BaseURL }}feed.json" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  {{ $styles := resources.Get "scss/styles.scss" | toCSS (dict "outputStyle" "compressed") | minify }}
  <style>{{ $styles.Content | safeCSS }}</style>
  

  {{ if .IsHome -}}
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "{{ .Site.Title }}",
    "url": "{{ .Site.BaseURL }}",
    "description": "{{ .Site.Params.description }}",
    "thumbnailUrl": "{{ .Site.Params.Logo | absURL }}",
    "license": "{{ .Site.Params.Copyright }}"
}
</script>
{{ else if .IsPage }}
{{ $author :=  or (.Params.author) (.Site.Author.name) }}
{{ $org_name :=  .Site.Title }}
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "{{ .Section }}",
    "name": "{{ .Title | safeJS }}",
    "headline": "{{ .Title | safeJS }}",
    "alternativeHeadline": "{{ .Params.lead }}",
    "description": "{{ if .Description }}{{ .Description | safeJS }}{{ else }}{{if .IsPage}}{{ .Summary  }}{{ end }}{{ end }}",
    "inLanguage": {{ .Site.LanguageCode | default "en-us" }},
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ .Permalink }}"
    },
    "author" : {
        "@type": "Person",
        "name": "{{ $author }}"
    },
    "creator" : {
        "@type": "Person",
        "name": "{{ $author }}"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "{{ $author }}"
    },
    "copyrightHolder" : "{{ $org_name }}",
    "copyrightYear" : "{{ .Date.Format "2006" }}",
    "dateCreated": "{{ .Date.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
    "datePublished": "{{ .PublishDate.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
    "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
    "publisher":{
        "@type":"Organization",
        "name": {{ $org_name }},
        "url": {{ .Site.BaseURL }},
        "logo": {
            "@type": "ImageObject",
            "url": "{{ .Site.Params.logo | absURL }}",
            "width":"32",
            "height":"32"
        }
    },
    "image": {{ if .Params.images }}[{{ range $i, $e := .Params.images }}{{ if $i }}, {{ end }}{{ $e | absURL }}{{ end }}]{{ else}}{{.Site.Params.logo | absURL }}{{ end }},
    "url" : "{{ .Permalink }}",
    "wordCount" : "{{ .WordCount }}",
    "genre" : [ {{ range $index, $tag := .Params.tags }}{{ if $index }}, {{ end }}"{{ $tag }}" {{ end }}],
    "keywords" : [ {{ range $index, $tag := .Params.tags }}{{ if $index }}, {{ end }}"{{ $tag }}" {{ end }}]
}
</script>
{{ end }}
{{ if not (in (.Site.BaseURL | string) "1313") }} 
    <script async defer data-website-id="5e0abc80-3725-4447-9eff-f3cf8186685e" src="https://umami.aliif.space/umami.js"></script>
{{ end }}
{{ $turbo := resources.Get "js/turbo.js" }}
<script src="{{ $turbo.Permalink | relURL }}" defer></script>
<script>
    if (localStorage.getItem('preferredTheme') == 'dark') {
        document.documentElement.setAttribute("data-theme","dark");
    } else {
        document.documentElement.setAttribute("data-theme","light");
    }
</script>
{{ $love := resources.Get "js/love.js" }}
<script src="{{ $love.Permalink | relURL }}" defer></script>
</head>
<body>
	<main>
		<header>
			<a class="title" href="{{ .Site.BaseURL }}">{{ .Site.Title }}</a>
			<nav>
                {{ $current := . }}
				{{- if .Site.Menus.main }}				
				<ul>
				{{- range .Site.Menus.main.ByWeight }}
                    {{ $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) }}
                    {{ $active = or $active (eq .Name $current.Title) }}
                    {{ $active = or $active (and (eq .Name "Articles") (eq $current.Section "articles")) }}
                    {{ $active = or $active (and (eq .Name "Projects") (eq $current.Section "projects")) }}
					<li><a href="{{ .URL }}" {{ if $active }}aria-current="page"{{ end }}>{{ .Name }}</a></li>
				{{- end }}
				</ul>
				{{- end }}
			</nav>
		</header>
		<div class="content">
			{{- block "main" . }}{{ end }}
		</div>
	</main>
    {{- if .Site.Params.FooterText }}
	<footer>
		<p>&copy; 2020-{{ now.Format "2006"}} ¬∑ {{ .Site.Params.FooterText }}</p>
        <div onclick=setDarkMode(true) id="darkBtn">üåö</div>
        <div onclick=setDarkMode(false) id="lightBtn" style="display: none;">üåù</div>
	</footer>
{{- end }}
<script>
    if (localStorage.getItem('preferredTheme') == 'dark') {
        setDarkMode(true)
    }
    function setDarkMode(isDark) {
        var darkBtn = document.getElementById('darkBtn')
        var lightBtn = document.getElementById('lightBtn')
        if (isDark) {
          lightBtn.style.display = "block"
          darkBtn.style.display = "none"
          localStorage.setItem('preferredTheme', 'dark');
          document.documentElement.setAttribute("data-theme","dark");
        } else {
          lightBtn.style.display = "none"
          darkBtn.style.display = "block"
          localStorage.removeItem('preferredTheme');
          document.documentElement.setAttribute("data-theme","light");
        }
    }
</script>
{{ $blank := resources.Get "js/blank.js" }}
<script src="{{ $blank.Permalink | relURL }}" defer></script>
{{ if (findRE "<pre" .Content 1) }}
    {{ $cb := resources.Get "js/cb.js" }}
    <script src="{{ $cb.Permalink | relURL }}" defer></script>
{{ end }}
{{ if (findRE "<img" .Content 1) }}
    {{ $zoom := resources.Get "js/zoom.js" }}
    <script src="{{ $zoom.Permalink | relURL }}" defer></script>
{{ end }}
{{ if (findRE "<input" .Content 1) }}
    {{ $search := resources.Get "js/search.js" }}
    <script src="{{ $search.Permalink | relURL }}" defer></script>
{{ end }}
</body>
</html>
